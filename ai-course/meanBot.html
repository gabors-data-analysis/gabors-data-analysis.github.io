<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>meanBot - Your Snarky Average Calculator</title>
    <style>
        /* 
        meanBot - Snarky Average Calculator
        Version: 1.2.0
        Created: 2025-10-27
        Model: Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
        Iterations: 3
        Description: Fixed voice input to properly separate numbers
        */
        
        body {
            font-family: 'Courier New', monospace;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #00ff00;
        }
        
        .container {
            border: 2px solid #00ff00;
            padding: 30px;
            border-radius: 10px;
            background-color: #0d0d0d;
        }
        
        h1 {
            text-align: center;
            color: #ff4444;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            font-size: 0.9em;
            margin-top: -10px;
            margin-bottom: 20px;
        }
        
        .input-group {
            margin: 20px 0;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #00ff00;
        }
        
        input[type="text"] {
            width: calc(100% - 20px);
            padding: 10px;
            background-color: #222;
            border: 1px solid #00ff00;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }
        
        button {
            padding: 12px 20px;
            margin: 5px;
            background-color: #00ff00;
            color: #000;
            border: none;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-transform: uppercase;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #00cc00;
        }
        
        button:active {
            background-color: #009900;
        }
        
        .voice-btn {
            background-color: #ff4444;
        }
        
        .voice-btn:hover {
            background-color: #cc0000;
        }
        
        .voice-btn.listening {
            background-color: #ffff00;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background-color: #222;
            border: 2px solid #ff4444;
            border-radius: 5px;
            text-align: center;
            font-size: 1.2em;
            display: none;
        }
        
        .result.show {
            display: block;
        }
        
        .mean-comment {
            color: #ff4444;
            font-style: italic;
            margin-top: 10px;
        }
        
        .button-group {
            text-align: center;
            margin-top: 20px;
        }
        
        .error {
            color: #ff4444;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ¤– meanBot</h1>
        <p class="subtitle">Your unnecessarily snarky average calculator</p>
        
        <div class="input-group">
            <label for="numberInput">Enter numbers (comma or space separated, genius):</label>
            <input type="text" id="numberInput" placeholder="1, 2, 3 or 1 2 3" />
            <div id="inputError" class="error"></div>
        </div>
        
        <div class="button-group">
            <button onclick="calculateAverage()">Calculate Average</button>
            <button class="voice-btn" id="voiceBtn" onclick="startVoiceInput()">ðŸŽ¤ Voice Input</button>
            <button onclick="clearAll()">Clear</button>
        </div>
        
        <div class="result" id="result"></div>
    </div>

    <script>
        // meanBot JavaScript
        // Version: 1.2.0
        // Model: Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
        // Iterations: 3
        
        let recognition = null;
        
        // Initialize speech recognition if available
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = 'en-US';
            recognition.continuous = false;
            recognition.interimResults = false;
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                // Extract all numbers from the transcript and join with commas
                const numbers = transcript.match(/-?\d+\.?\d*/g);
                if (numbers && numbers.length > 0) {
                    document.getElementById('numberInput').value = numbers.join(', ');
                } else {
                    document.getElementById('numberInput').value = transcript;
                }
                stopVoiceInput();
            };
            
            recognition.onerror = function(event) {
                stopVoiceInput();
                showError("Couldn't understand you. Try speaking clearer, genius.");
            };
            
            recognition.onend = function() {
                stopVoiceInput();
            };
        }
        
        // Mean comments for different situations
        const meanComments = {
            success: [
                "There you go, genius.",
                "Was that calculation too hard for you?",
                "Duh, here's your bloody answer.",
                "Bloody hell, finally.",
                "Could've done this faster with an abacus.",
                "Congratulations, you can average. Want a medal?",
                "About time.",
                "Hope you learned something today.",
                "There's your number. Happy now?"
            ],
            empty: [
                "You haven't entered ANY numbers yet. Come on!",
                "What am I supposed to average? Your IQ? Oh wait...",
                "Seriously? No numbers? Bloody brilliant.",
                "Add some numbers first, Einstein.",
                "Empty input. Shocking."
            ],
            invalid: [
                "That's not a valid list of numbers, you muppet.",
                "Are you even trying? I need actual numbers.",
                "Numbers only, please. This isn't rocket science.",
                "Really? THAT'S your input? Try again.",
                "I said NUMBERS. N-U-M-B-E-R-S.",
                "Parse error. In other words, you messed up.",
                "What part of 'numbers separated by commas or spaces' confused you?"
            ]
        };
        
        function getRandomComment(category) {
            const comments = meanComments[category];
            return comments[Math.floor(Math.random() * comments.length)];
        }
        
        function showError(message) {
            const errorDiv = document.getElementById('inputError');
            errorDiv.textContent = message;
        }
        
        function parseNumbers(input) {
            // Split by comma or space, filter out empty strings, convert to numbers
            const parts = input.split(/[\s,]+/).filter(s => s.length > 0);
            const numbers = parts.map(s => parseFloat(s)).filter(n => !isNaN(n));
            return numbers;
        }
        
        function calculateAverage() {
            const input = document.getElementById('numberInput').value.trim();
            
            if (input === '') {
                showError(getRandomComment('empty'));
                hideResult();
                return;
            }
            
            const numbers = parseNumbers(input);
            
            if (numbers.length === 0) {
                showError(getRandomComment('invalid'));
                hideResult();
                return;
            }
            
            const sum = numbers.reduce((a, b) => a + b, 0);
            const average = sum / numbers.length;
            
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <div style="font-size: 2em; margin-bottom: 10px;">${average.toFixed(2)}</div>
                <div class="mean-comment">${getRandomComment('success')}</div>
            `;
            resultDiv.classList.add('show');
            showError('');
        }
        
        function clearAll() {
            document.getElementById('numberInput').value = '';
            hideResult();
            showError("Fine, starting over.");
        }
        
        function hideResult() {
            document.getElementById('result').classList.remove('show');
        }
        
        function startVoiceInput() {
            if (!recognition) {
                showError("Voice input not supported in your browser. Typical.");
                return;
            }
            
            const voiceBtn = document.getElementById('voiceBtn');
            voiceBtn.classList.add('listening');
            voiceBtn.textContent = 'ðŸŽ¤ Listening...';
            
            try {
                recognition.start();
            } catch (e) {
                stopVoiceInput();
                showError("Voice input error. Try typing instead.");
            }
        }
        
        function stopVoiceInput() {
            if (recognition) {
                const voiceBtn = document.getElementById('voiceBtn');
                voiceBtn.classList.remove('listening');
                voiceBtn.textContent = 'ðŸŽ¤ Voice Input';
            }
        }
        
        // Allow Enter key to calculate
        document.getElementById('numberInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateAverage();
            }
        });
    </script>
</body>
</html>
